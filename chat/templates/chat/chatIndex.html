{%extends "chat/base.html"%}

{%load static%}

{%block content%}
<div class = "row" style = "margin-bottom:50px;">
    <div class = "col-md-4 mb-2">
        <div id = "recent">
        
        <div class = "note" style = "margin-bottom:25px;">
            <button type = "button" class = "btn btn-info">Recents<span id = "msgcount"></span></button>
        </div>
        
        {%for items in allMsg%}
        <div class = "panel recent" style = "">
            <h5 style = "color:white">{{items.sender}}</h5>
            <small class = "text-warning">{{items.timestamp}}</small>
            <hr style = "margin:5px;" class = "w3-yellow;">
            <p>{{items.chat | slice:50}}..........</p>
        </div>
        <br>
        {%endfor%}
        </div>
        
    </div>
     <div class = "col-md-3" align = "center">
         <div id = "chat">
        <h3>Chats</h3>
        <hr>
        {%for item in acceptedFriend%}
        <div class = "" style = "bottom-margin:3px;">
            <a href = "{%url 'chat:chatRoom' item.user.username%}" class = "btn btn-warning btn-block" style = "padding:3px;">
                {{item.user.first_name}} {{item.user.last_name}} 
            </a>
        </div>
        <br>
        {%endfor%}
    </div>
    </div>
    
    <div class = "col-md-3" style = "" align = "center">
        <div id = "requests">
        <h3>Friend Requests</h3>
        <hr>
        {%for item in friends%}
        <div class = "" style = "bottom-margin:3px;">
            <button class = "btn btn-info btn-block" style = "padding:3px;">{{item.user.username}}</button>
            <a href = "{%url 'chat:acceptFriend' item.user.username %}">Accept</a>....||....<a href = "{%url 'chat:declineFriend' item.id%}">Decline</a>
        </div>
        <br>
        {%endfor%}
        </div>
    </div>
</div>
{%endblock%}
{%block otherJs%}
<script src = "{%static 'js/main.js'%}">
</script>
<script src = "{%static 'js/loader.js'%}">
</script>
{%endblock%}